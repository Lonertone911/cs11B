{% extends 'layouts/base.html' %}

{% block title %} Manage Market Events {% endblock title %}

{% block content %}

    <!-- Header -->
    <div class="header bg-gradient-primary pb-8 pt-5 pt-md-8">
      <span class="mask bg-gradient-default opacity-8"></span>
      <div class="container-fluid d-flex align-items-center">
        <div class="row">
            <div class="col-lg-7 col-md-10">
              <h1 class="display-2 text-white">Manage Market Events</h1>
              <p class="text-white mt-0 mb-5">Use this page to setup and edit existing market events. Market events are important as they change the games dynamic by redefining what makes a buisness strategy succesful, for the duration of the event. Before setting up a new market event, please ensure that there is a simulator for the market event to belong to. It is recommended that there is only one market event in play at any one time. Overlapping market events will result in the most recent to be used. </p>
            </div>
        </div>
      </div>
    </div>

    <div class="container-fluid mt--7">

      <!-- Table -->
      <div class="row">
        <div class="col">
          <div class="card shadow">
            <div class="table-responsive">
              <table class="table align-items-center table-flush">
                <thead class="thead-light">
                  <tr>
                    <th scope="col">Market Event</th>
                    <th scope="col">Edit Event</th>
                  </tr>
                </thead>
                <tbody>
		            {% for event in events %}
                        <tr>
                          <th scope="row">
                            <div class="media align-items-center">
                              <a href="#" class="avatar rounded-circle mr-3">
                              <img alt="Image placeholder" src="/static/assets/img/brand/favicon.png">
                              </a>
                              <div class="media-body">
                              <span class="mb-0 text-sm">{{event.market_event_title}}</span>
                              </div>
                            </div>
                      </th>
                      <td>
                          <div class="dropdown">
                            <a class="btn btn-sm btn-icon-only text-light" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                              <i class="ni ni-settings-gear-65 text-blue"></i>
                            </a>
                            <div class="dropdown-menu dropdown-menu-arrow">
                              <a class="dropdown-item" href="{% url 'simulatorApp:editMarketEvent' %}?event_id={{ event.id }}">Edit Event</a>
                          <form method="POST" action="" id="del_event">
                              {% csrf_token %}
                            <input type="hidden" id="delevent" name="delevent" value="{{event.id}}">
                            
                            <button type="submit" class="dropdown-item text-danger" name="delEvent" value="true">Delete Event</button>
                          </form>
                    </div>          
                  </div>
                </td>
              </tr>
              {% endfor %}
                </tbody>
              </table>
              </div>
              <div class="card-footer py-4">
                <nav aria-label="...">
                  <ul class="pagination justify-content-end mb-0">
                    <li class="page-item disabled">
                      <a class="page-link" href="#" tabindex="-1">
                        <i class="fas fa-angle-left"></i>
                        <span class="sr-only">Previous</span>
                      </a>
                    </li>
                    <li class="page-item active">
                      <a class="page-link" href="#">1</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="#">2 <span class="sr-only">(current)</span></a>
                    </li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                      <a class="page-link" href="#">
                        <i class="fas fa-angle-right"></i>
                        <span class="sr-only">Next</span>
                      </a>
                    </li>
                  </ul>
                </nav>
              </div>
		          <form method="POST" action="" id="event_form">
		            {% csrf_token %}
      	    		<div class="col-lg-6">
                  <div class="form-group">
                      <button type="submit" class="btn btn-primary" name="addEvent" value="true">Add Event</button>
                  </div>
      	    		</div>
		          </form>
          </div>
        </div>
      </div>
      
      </div>
      
    
	{% include "includes/footer.html" %}
    </div>

{% endblock content %}

<!-- Specific JS goes HERE --> 
{% block javascripts %}

<script>
  $(document).ready(function(){

  });

</script>
{% endblock javascripts %}
